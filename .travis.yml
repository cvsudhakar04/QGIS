language: cpp

os:
  - linux
  - osx

compiler:
  - clang

git:
  depth: 1

cache: apt

notifications:
  irc: "chat.freenode.net#qgis-test"
  on_failure: change
  on_success: change
  skip_join: true

notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/467e3aff72e344d1dae3
    on_success: change  # options: [always|never|change] default: always
    on_failure: always # options: [always|never|change] default: always
    on_start: never # default: never

addons:
  postgresql: "9.1"

before_install:
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'linux' ]; then ./ci/travis/before_install-linux.sh; fi"
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'osx' ]; then ./ci/travis/before_install-osx.sh; fi"

install:
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'linux' ]; then ./ci/travis/install-linux.sh; fi"
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'osx' ]; then ./ci/travis/install-osx.sh; fi"

before_script:
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'linux' ]; then ./ci/travis/before_script-linux.sh; fi"

script:
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'linux' ]; then ./ci/travis/script-linux.sh; fi"
  - "if [ ${TRAVIS_OS_NAME:-'linux'} = 'osx' ]; then ./ci/travis/script-osx.sh; fi"

